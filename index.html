<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function scrollToSlide(slideIndex, checkValueId = "") {
        if (checkValueId != "") {
          var checkValue = document.getElementById(checkValueId);
          if (!checkValue.value) {
            checkValue.focus();
            return;
          }
        }
        var slidesWrapper = document.getElementById("slides-wrapper");
        var slideWidth = window.innerWidth;
        slidesWrapper.scrollTo({
          left: slideWidth * slideIndex,
          behavior: "smooth",
        });
        if (checkValueId === "email") {
          var email = document.getElementById("email");
          if (email != null && !email.value.includes("@")) {
            email.focus();
            email.value = "";
            email.setAttribute("placeholder", "Please enter a valid email");
            return;
          }
        }
      }
    </script>
    <form id="slides-wrapper">
      <div class="slide slide-1">
        <div class="main">
          <img
            class="logotype"
            src="https://bertonisolutions.com/hubfs/Design%20assets/Shared%20images/Logotype_Bertoni_Solutions.webp"
          />
          <div class="main-form">
            <div class="form-header">Remote team budget calculator</div>
            <div class="form-content">
              <div class="form-step">Let’s start with your name.</div>
              <div class="form-indication">Enter your full name</div>
              <input
                name="name"
                id="name"
                class="form-field"
                type="text"
                placeholder="eg. Sarah Smith"
                required
              />
            </div>
            <div class="form-buttons">
              <button
                class="button button-primary"
                type="button"
                onclick="scrollToSlide(1, 'name')"
              >
                Get Started
              </button>
            </div>
            <div class="form-progress">1/4</div>
          </div>
        </div>
        <div class="aside">
          <div class="aside-title">
            How much does it cost to build my remote tech team?
          </div>
          <div class="aside-description">
            Understand the potential cost savings of nearshoring compared to
            in-house hiring.
          </div>
        </div>
      </div>
      <div class="slide slide-2">
        <div class="main">
          <div class="main-form">
            <div class="form-content">
              <div class="form-step">Team composition</div>
              <div class="form-indication">
                Please define the essential roles and seniority needed.
              </div>
            </div>
            <div class="role-seniority">
              <select
                name="role-selector"
                id="role-selector"
                class="form-select"
              >
                <option value="" disabled selected hidden>Select a role</option>
                <option value="Fullstack Software Developer">
                  Fullstack Software Developer
                </option>
                <option value="Backend Software Developer">
                  Backend Software Developer
                </option>
                <option value="Frontend Software Developer">
                  Frontend Software Developer
                </option>
                <option value="React Native Developer">
                  React Native Developer
                </option>
                <option value="Android and iOS Native Developer">
                  Android and iOS Native Developer
                </option>
                <option value="Java Full Stack Developer">
                  Java Full Stack Developer
                </option>
                <option value="Cloud Specialist">Cloud Specialist</option>
                <option value="Azure Data Engineer">Azure Data Engineer</option>
                <option value="Azure DevOps Engineer">
                  Azure DevOps Engineer
                </option>
                <option value="Data Scientist">Data Scientist</option>
                <option value="UX/UI Designer">UX/UI Designer</option>
                <option value="QA Engineer">QA Engineer</option>
                <option value="Cybersecurity Specialist">
                  Cybersecurity Specialist
                </option>
                <option value="Machine Learning Engineer">
                  Machine Learning Engineer
                </option>
                <option value="Project Manager">Project Manager</option>
                <option value="Business Analyst">Business Analyst</option>
                <option value="Power BI Specialist">Power BI Specialist</option>
              </select>
              <select
                name="seniority-selector"
                id="seniority-selector"
                class="form-select"
                style="width: auto"
              >
                <option value="" disabled selected hidden>Seniority</option>
                <option value="Junior">Junior</option>
                <option value="Mid">Mid</option>
                <option value="Senior">Senior</option>
              </select>
              <button
                type="button"
                class="button button-tertiary"
                onclick="addRole()"
              >
                Add role
              </button>
            </div>
            <table>
              <thead>
                <tr>
                  <th>Role</th>
                  <th>Seniority</th>
                  <th>Quantity</th>
                </tr>
              </thead>
              <tbody id="selectionTable"></tbody>
            </table>
            <div class="form-buttons">
              <button
                class="button button-secondary"
                type="button"
                onclick="scrollToSlide(0)"
              >
                ←
              </button>
              <button
                class="button button-primary"
                type="button"
                data-tooltip="Please add at least one role"
                onclick="scrollToSlide(2)"
              >
                Let me see the results
              </button>
            </div>
            <div class="form-progress">2/4</div>
          </div>
        </div>
        <div class="aside">
          <div class="aside-review">
            <div class="aside-review-title">
              &quot;Dedication to excellence, quality of talent, and ownership
              involvement are the pillars that define our partnership.&quot;
            </div>
            <svg
              class="aside-review-score"
              width="152"
              height="24"
              viewBox="0 0 152 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12 0L14.6942 8.2918H23.4127L16.3593 13.4164L19.0534 21.7082L12 16.5836L4.94658 21.7082L7.64074 13.4164L0.587322 8.2918H9.30583L12 0Z"
                fill="#FFCD29"
              />
              <path
                d="M44 0L46.6942 8.2918H55.4127L48.3593 13.4164L51.0534 21.7082L44 16.5836L36.9466 21.7082L39.6407 13.4164L32.5873 8.2918H41.3058L44 0Z"
                fill="#FFCD29"
              />
              <path
                d="M76 0L78.6942 8.2918H87.4127L80.3593 13.4164L83.0534 21.7082L76 16.5836L68.9466 21.7082L71.6407 13.4164L64.5873 8.2918H73.3058L76 0Z"
                fill="#FFCD29"
              />
              <path
                d="M108 0L110.694 8.2918H119.413L112.359 13.4164L115.053 21.7082L108 16.5836L100.947 21.7082L103.641 13.4164L96.5873 8.2918H105.306L108 0Z"
                fill="#FFCD29"
              />
              <path
                d="M140 0L142.694 8.2918H151.413L144.359 13.4164L147.053 21.7082L140 16.5836L132.947 21.7082L135.641 13.4164L128.587 8.2918H137.306L140 0Z"
                fill="#FFCD29"
              />
            </svg>
            <div class="aside-review-reviewer">
              <div class="reviewer">US-based global consulting firm</div>
              <div class="reviewer-role">*Client name subject to NDA</div>
            </div>
          </div>
        </div>
      </div>
      <div class="slide slide-3">
        <div class="main">
          <div class="main-form">
            <div class="form-content">
              <div class="form-step">
                Good choices!
                <br />
                Your results are coming...
              </div>
              <div class="form-indication">
                We’ll send a copy of your results to your email.
              </div>
              <input
                name="email"
                id="email"
                class="form-field"
                pattern="email"
                type="email"
                placeholder="hello@yourwebsite.com"
                required
              />
            </div>
            <div class="form-buttons">
              <button
                class="button button-secondary"
                type="button"
                onclick="scrollToSlide(1)"
              >
                ←
              </button>
              <button
                class="button button-primary"
                type="button"
                onclick="scrollToSlide(3, 'email')"
              >
                Let me see the results
              </button>
            </div>
            <div class="form-progress">3/4</div>
          </div>
        </div>
        <div class="aside">
          <div class="aside-review">
            <div class="aside-review-title">
              &quot;Dedication to excellence, quality of talent, and ownership
              involvement are the pillars that define our partnership.&quot;
            </div>
            <svg
              class="aside-review-score"
              width="152"
              height="24"
              viewBox="0 0 152 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12 0L14.6942 8.2918H23.4127L16.3593 13.4164L19.0534 21.7082L12 16.5836L4.94658 21.7082L7.64074 13.4164L0.587322 8.2918H9.30583L12 0Z"
                fill="#FFCD29"
              />
              <path
                d="M44 0L46.6942 8.2918H55.4127L48.3593 13.4164L51.0534 21.7082L44 16.5836L36.9466 21.7082L39.6407 13.4164L32.5873 8.2918H41.3058L44 0Z"
                fill="#FFCD29"
              />
              <path
                d="M76 0L78.6942 8.2918H87.4127L80.3593 13.4164L83.0534 21.7082L76 16.5836L68.9466 21.7082L71.6407 13.4164L64.5873 8.2918H73.3058L76 0Z"
                fill="#FFCD29"
              />
              <path
                d="M108 0L110.694 8.2918H119.413L112.359 13.4164L115.053 21.7082L108 16.5836L100.947 21.7082L103.641 13.4164L96.5873 8.2918H105.306L108 0Z"
                fill="#FFCD29"
              />
              <path
                d="M140 0L142.694 8.2918H151.413L144.359 13.4164L147.053 21.7082L140 16.5836L132.947 21.7082L135.641 13.4164L128.587 8.2918H137.306L140 0Z"
                fill="#FFCD29"
              />
            </svg>
            <div class="aside-review-reviewer">
              <div class="reviewer">US-based global consulting firm</div>
              <div class="reviewer-role">*Client name subject to NDA</div>
            </div>
          </div>
        </div>
      </div>
      <div class="slide slide-4">
        <div class="main">
          <div class="main-form">
            <div class="main-form-header">
              <div class="form-step">Here are your results!</div>
              <div class="form-indication">
                <span>
                  <span class="form-indication-span">
                    Hiring remote tech talent from Latin America would cost you
                    around 
                  </span>
                  <span id="nearshoring-cost" class="form-indication-span2"
                    >$725.000</span
                  >
                  <span class="form-indication-span3"> per year.</span>
                </span>
              </div>
            </div>
            <div class="saving-total">
              <span id="saving-percentage"></span> total of saving
            </div>
            <div class="results">
              <div class="results-header">Annual potential cost by role:</div>
              <table class="results-table">
                <thead>
                  <tr>
                    <th>Position</th>
                    <th>Quantity</th>
                    <th>Local</th>
                    <th>Nearshoring</th>
                  </tr>
                </thead>
              </table>
              <div class="results-footnote">
                <div class="results-footnote-header">
                  In addition to salaries, consider these hidden costs
                  associated with hiring new employees on site:
                </div>
                <div class="results-footnote-list">
                  <div class="results-footnote-li">
                    <span>
                      <span class="results-footnote-li-span"
                        >Recruitment fees:</span
                      >
                      <span class="results-footnote-li-span2">
                        Often 20% of the annual salary.
                      </span>
                    </span>
                  </div>
                  <div class="results-footnote-li">
                    <span>
                      <span class="results-footnote-li-span3">
                        Training and onboarding:
                      </span>
                      <span class="results-footnote-li-span4">
                        Can cost up to $10,000 per employee.
                      </span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-progress">4/4</div>
          </div>
        </div>
        <div class="aside">
          <div class="aside-note">
            <div class="aside-note-content">
              Please note: Salary ranges can vary depending on experience,
              location, and specific skills. This is a general estimate and may
              not be perfectly accurate for your specific situation.
            </div>
          </div>
        </div>
      </div>
    </form>
    <script>
      "use strict";
      var __awaiter =
        (this && this.__awaiter) ||
        function (thisArg, _arguments, P, generator) {
          function adopt(value) {
            return value instanceof P
              ? value
              : new P(function (resolve) {
                  resolve(value);
                });
          }
          return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) {
              try {
                step(generator.next(value));
              } catch (e) {
                reject(e);
              }
            }
            function rejected(value) {
              try {
                step(generator["throw"](value));
              } catch (e) {
                reject(e);
              }
            }
            function step(result) {
              result.done
                ? resolve(result.value)
                : adopt(result.value).then(fulfilled, rejected);
            }
            step(
              (generator = generator.apply(thisArg, _arguments || [])).next()
            );
          });
        };
      class TalentElement {
        constructor(hsid, role, seniority, amount) {
          this.hsid = hsid;
          this.role = role;
          this.seniority = seniority;
          this.amount = amount;
        }
        addLocalValues(min, max) {
          this.local = {
            min,
            max,
          };
        }
        addRemoteValues(min, max) {
          this.remote = {
            min,
            max,
          };
        }
        getMidLocalCost() {
          return (this.local.min + this.local.max) / 2;
        }
        getMidRemoteCost() {
          return (this.remote.min + this.remote.max) / 2;
        }
      }

      // ----------- Constants ------------
      const roleIdMap = {
        "Fullstack Software Developer": "181702971581",
        "Backend Software Developer": "181702971582",
        "Frontend Software Developer": "181702971583",
        "React Native Developer": "181702971584",
        "Android and iOS Native Developer": "181702971585",
        "Java Full Stack Developer": "181702971586",
        "Cloud Specialist": "181702971587",
        "Azure Data Engineer": "181702971588",
        "Azure DevOps Engineer": "181702971589",
        "Data Scientist": "181702971590",
        "UX/UI Designer": "181702971591",
        "QA Engineer": "181702971592",
        "Cybersecurity Specialist": "181702971593",
        "Machine Learning Engineer": "181702971594",
        "Project Manager": "181702971595",
        "Business Analyst": "181702971596",
        "Power BI Specialist": "181702971597",
      };
      let pickedRoles = [];
      function addRole() {
        const roleSelector = document.getElementById("role-selector");
        const senioritySelector = document.getElementById("seniority-selector");
        if (!roleSelector.value || !senioritySelector.value) {
          return;
        }
        const role = roleSelector.value;
        const seniority = senioritySelector.value;
        const existingTalent = pickedRoles.find(
          (talent) => talent.role === role && talent.seniority === seniority
        );
        if (existingTalent) {
          existingTalent.count++;
        } else {
          pickedRoles.push({
            id: parseInt(roleIdMap[role]),
            role,
            seniority,
            count: 1,
          });
        }
        updateTable();
      }
      function removeOne(role, seniority) {
        const talentIndex = pickedRoles.findIndex(
          (talent) => talent.role === role && talent.seniority === seniority
        );
        if (talentIndex === -1) {
          return;
        }
        if (pickedRoles[talentIndex].count === 1) {
          pickedRoles.splice(talentIndex, 1);
        } else {
          pickedRoles[talentIndex].count--;
        }
        updateTable();
      }
      function addOne(role, seniority) {
        const talentIndex = pickedRoles.findIndex(
          (talent) => talent.role === role && talent.seniority === seniority
        );
        if (talentIndex === -1) {
          pickedRoles.push({
            id: parseInt(roleIdMap[role]),
            role,
            seniority,
            count: 1,
          });
        } else {
          pickedRoles[talentIndex].count++;
        }
        updateTable();
      }
      function updateTable() {
        var _a, _b;
        const table = document.getElementById("selectionTable");
        table.innerHTML = "";
        for (const selectedRole of pickedRoles) {
          const row = document.createElement("tr");
          const roleCell = document.createElement("td");
          roleCell.textContent = selectedRole.role;
          row.appendChild(roleCell);
          const seniorityCell = document.createElement("td");
          seniorityCell.textContent = selectedRole.seniority;
          row.appendChild(seniorityCell);
          const countCell = document.createElement("td");
          countCell.innerHTML = `
        <div class="btn-container">
          <button type="button" class="remove-btn">-</button>
          ${selectedRole.count}
          <button type="button" class="add-btn">+</button>
        </div>
      `;
          row.appendChild(countCell);
          table.appendChild(row);
          (_a = row.querySelector(".remove-btn")) === null || _a === void 0
            ? void 0
            : _a.addEventListener("click", () =>
                removeOne(selectedRole.role, selectedRole.seniority)
              );
          (_b = row.querySelector(".add-btn")) === null || _b === void 0
            ? void 0
            : _b.addEventListener("click", () =>
                addOne(selectedRole.role, selectedRole.seniority)
              );
        }
      }
      function orderRoles() {
        pickedRoles.sort((a, b) => {
          if (a.role < b.role) {
            return -1;
          }
          if (a.role > b.role) {
            return 1;
          }
          return 0;
        });
      }
      function getFromDb(roleList) {
        return __awaiter(this, void 0, void 0, function* () {
          const mappedRoleIds = roleList.map((role) => roleIdMap[role]);
          const url = `https://api.hubapi.com/cms/v3/hubdb/tables/94383314/rows/batch/read?portalId=144905752`;
          const request = new Request(url, {
            method: "POST",
            headers: new Headers({
              "Content-Type": "application/json",
            }),
            body: JSON.stringify({
              inputs: mappedRoleIds,
            }),
          });
          let data;
          try {
            const response = yield fetch(request);
            if (!response.ok) {
              throw new Error(
                "Error fetching data. Sorry for the inconvenience."
              );
            }
            data = yield response.json();
          } catch (error) {
            console.error("Error fetching data:", error);
            throw error;
          }
          const cleanResults = {};
          data.results.forEach((result) => {
            cleanResults[result.id] = {
              id: result.id,
              values: {
                local_junior_min: result.values.local_junior_min,
                local_junior_max: result.values.local_junior_max,
                local_mid_min: result.values.local_mid_min,
                local_mid_max: result.values.local_mid_max,
                local_senior_min: result.values.local_senior_min,
                local_senior_max: result.values.local_senior_max,
                remote_junior_min: result.values.remote_junior_min,
                remote_junior_max: result.values.remote_junior_max,
                remote_mid_min: result.values.remote_mid_min,
                remote_mid_max: result.values.remote_mid_max,
                remote_senior_min: result.values.remote_senior_min,
                remote_senior_max: result.values.remote_senior_max,
                role: result.values.role,
              },
            };
          });
          return cleanResults;
        });
      }
      function calculateResults() {
        return __awaiter(this, void 0, void 0, function* () {
          try {
            // For each role in pickedRoles, create a TalentElement
            const talentElements = pickedRoles.map(
              (selectedRole) =>
                new TalentElement(
                  selectedRole.id.toString(),
                  selectedRole.role,
                  selectedRole.seniority,
                  selectedRole.count
                )
            );
            const apiResult = yield getFromDb(
              pickedRoles.map((role) => role.role)
            );
            // For each TalentElement, add the local and remote values
            talentElements.forEach((talentElement) => {
              const dbResult = apiResult[talentElement.hsid];
              if (!dbResult) {
                console.error(
                  `No data found for role ID: ${talentElement.hsid}`
                );
                return;
              }
              switch (talentElement.seniority) {
                case "Junior":
                  talentElement.addLocalValues(
                    dbResult.values.local_junior_min,
                    dbResult.values.local_junior_max
                  );
                  talentElement.addRemoteValues(
                    dbResult.values.remote_junior_min,
                    dbResult.values.remote_junior_max
                  );
                  break;
                case "Mid":
                  talentElement.addLocalValues(
                    dbResult.values.local_mid_min,
                    dbResult.values.local_mid_max
                  );
                  talentElement.addRemoteValues(
                    dbResult.values.remote_mid_min,
                    dbResult.values.remote_mid_max
                  );
                  break;
                case "Senior":
                  talentElement.addLocalValues(
                    dbResult.values.local_senior_min,
                    dbResult.values.local_senior_max
                  );
                  talentElement.addRemoteValues(
                    dbResult.values.remote_senior_min,
                    dbResult.values.remote_senior_max
                  );
                  break;
                default:
                  console.error("Invalid seniority:", talentElement.seniority);
                  break;
              }
            });
            const resultTable = document.querySelector(".results-table");
            const resultTableBody = document.createElement("tbody");
            resultTable.appendChild(resultTableBody);
            var avgSum = 0;
            var avgSumLocal = 0;
            talentElements.forEach((talentElement) => {
              const dbResult = apiResult[talentElement.hsid];
              if (!dbResult) {
                console.error(
                  `No data found for role ID: ${talentElement.hsid}`
                );
                return;
              }
              const row = document.createElement("tr");
              row.innerHTML = `
        <td>${talentElement.seniority} ${talentElement.role}</td>
        <td>${talentElement.amount}</td>
        <td>${dbResult.values.local_junior_min * talentElement.amount} - ${
                dbResult.values.local_junior_max * talentElement.amount
              }</td>
        <td>${dbResult.values.remote_junior_min * talentElement.amount} - ${
                dbResult.values.remote_junior_max * talentElement.amount
              }</td>
      `;
              resultTableBody.appendChild(row);
              avgSum += talentElement.getMidRemoteCost() * talentElement.amount;
              avgSumLocal +=
                talentElement.getMidLocalCost() * talentElement.amount;
            });
            const nearshoringCost = document.getElementById("nearshoring-cost");
            nearshoringCost.innerHTML = "$ " + avgSum;
            const avgSaving = document.getElementById("saving-percentage");
            avgSaving.innerText =
              (((avgSumLocal - avgSum) / avgSumLocal) * 100).toFixed(2) + "%";
          } catch (error) {
            console.error("Error calculating results:", error);
          }
        });
      }

      document
        .querySelector(".slide-2 .button-primary")
        .addEventListener("click", calculateResults);
    </script>
  </body>
</html>
